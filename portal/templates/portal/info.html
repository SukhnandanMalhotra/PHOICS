{% load staticfiles %}
<!DOCTYPE html>
<html>
<head>
	<title>upload file</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="{% static 'portal/Upload.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
     <script>

         function preview(evt)
         {
             {# FileList contain user selected files and index 0 means first file #}

             var reader = new FileReader();
             reader.onload = function()
             {
                 var output = document.getElementById('output');
                 output.src = reader.result;
             }
             reader.readAsDataURL(evt.target.files[0]);
         }
    </script>
</head>
<body>
    <div id="top">
        <h2>PHOICS</h2>
        <a href="{% url 'search' %}"><i class="fa fa-search fa-2x" aria-hidden="true"></i></a>
        <a href="{% url 'newsfeed' %}"><i class="fa fa-home fa-2x" aria-hidden="true"></i></a>
        <a href="{% url 'profile' user.username %}">	<i class="fa fa-user fa-2x" aria-hidden="true"></i></a>
        <a href="{% url 'logout' %}"><i class="fa fa-sign-out fa-2x" aria-hidden="true"></i></a>

    </div>
    {% if request.user.is_authenticated %}

    <div class="container">

         <div class="content heading"><p class="upload"><p style="text-align: center; font-size: 200%">
            {{ user.username }}</p><br><br>YOUR INFO</div>

         <div class="content form">
             <div class="Form">
                 {% if user.is_authenticated %}
                     <form method='post' enctype="multipart/form-data" onchange="preview(event)">
                         {% csrf_token %}
                         {% for field in form %}
                             <div class="row">
                                 <label for="name">{{ field.label_tag }}</label>
                                 {{ field }}<br><br>
                                  {% for error in field.errors %}
                                     <p style="color: red">{{ error }}</p>
                                 {% endfor %}
                             </div>
                         {% endfor %}
                         <button class="button" type="submit">SUBMIT</button><br>
                     </form>
                 {% endif %}
             </div>
         </div>
    <div class="content preview">
         <div class="image">
                        <h3>Current profile pic</h3>
              <div class="image"><img id="output"></div>

           <img src="{{ obj.profile_pic.url }}" style="width: 200px; height: 200px;">
      </div>
      </div>
    </div>
{% endif %}
</body>
</html>